type User {
  id: ID! @id
  tmcId: Int! @unique
  role: Role!
  workspaceOwned: [Workspace!]! @relation(name:"WorkspaceOwner")
  workspacesParticipated: [Workspace!]! @relation(name: "WorkspaceParticipant")
}

enum Role {
  GUEST
  STUDENT
  STAFF
  ADMIN
}

enum WorkspaceType {
  STAFF
  STUDENT
}

type Workspace {
  id: ID! @id
  name: String!
  owner: User! @relation(name:"WorkspaceOwner")
  participants: [User!]! @relation(name:"WorkspaceParticipant")
  course: Course! @relation(name:"WorkspaceCourses")
  prerequisiteCourses: [Course!]! @relation(name:"WorkspacePrerequisiteCourses")
  concepts: [Concept!]! @relation(name:"WorkspaceConcepts")
  subWorkspaces: [Workspace!]! @relation(name: "SubWorkspaces")
  type: WorkspaceType!
  links: [Link!]! @relation(name:"WorkspaceLinks")
}

type Course {
  id: ID! @id
  name: String!
  concepts: [Concept!]! @relation(name:"Courses") 
  prerequisites: [Concept!]! @relation(name:"Prerequisite") # Will be removed
  learningObjectives: [Concept!]! @relation(name:"LearningObjective") # Will be removed
  prerequisiteCourses: [Course!]! # Will be removed
  workspaces: [Workspace!]! @relation(name:"WorkspaceCourses")
}

type Concept {
  id: ID! @id
  name: String!
  description: String
  # user: User! @relation(link: INLINE)
  official: Boolean! @default(value: false)
  linksFromConcept: [Link!]! @relation(name: "From")
  linksToConcept: [Link!]! @relation(name: "To")
  courses: [Course!]! @relation(name: "Courses")
  resources: [Resource!]!
  asPrerequisite: [Course!]! @relation(name:"Prerequisite") # Will be removed
  asLearningObjective: [Course!]! @relation(name:"LearningObjective") # Will be removed
  workspaces: [Workspace!]! @relation(name:"WorkspaceConcepts")
}

type Resource {
  id: ID! @id
  concept: Concept!
  name: String!
  description: String!
  urls: [URL!]!
}

type URL {
  id: ID! @id
  address: String!
  resource: Resource!
}

## Link to workspace
type Link { 
  id: ID! @id
  from: Concept! @relation(link: INLINE, name: "From")
  to: Concept! @relation(link: INLINE, name: "To")
  # user: User! @relation(link: INLINE)
  official: Boolean! @default(value: false)
  workspace: [Workspace!]! @relation(name:"WorkspaceLinks")
}