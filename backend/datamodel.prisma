type User {
  id: ID! @id
  tmcId: Int! @unique
  role: Role!
  asProjectOwner: [Project!]! @relation(name:"ProjectOwner")
  asProjectParticipant: [Project!]! @relation(name:"ProjectParticipant")
}

enum Role {
  GUEST
  STUDENT
  STAFF
  ADMIN
}

type Project {
  id: ID! @id
  name: String!
  owner: User! @relation(name:"ProjectOwner")
  participants: [User!]! @relation(name:"ProjectParticipant")
  workspaces: [Workspace!]! @relation(name: "UserWorkspaces")
  template: Workspace! @relation(link: INLINE, name:"Template")
}

type Workspace {
  id: ID! @id
  project: Project! @relation(name: "UserWorkspaces")
  user: User!
  defaultCourse: Course! @relation(link: INLINE, name:"DefaultCourse")
  courses: [Course!]! @relation(name:"WorkspaceCourses")
  concepts: [Concept!]! @relation(name:"WorkspaceConcepts")
  conceptLinks: [ConceptLink!]! @relation(name:"WorkspaceConceptLinks")
  courseLinks: [CourseLink!]! @relation(name:"WorkspaceCourseLinks")
}

type CourseLink {
  id: ID! @id
  from: Course! @relation(link: INLINE, name: "PrerequisiteCourse")
  to: Course! @relation(link: INLINE, name: "TargetCourse")
  official: Boolean! @default(value: false)
  workspace: [Workspace!]! @relation(name:"WorkspaceCourseLinks")
}

type Course {
  id: ID! @id
  name: String!
  createdBy: User!
  linksFromCourse: [CourseLink!]! @relation(name: "PrerequisiteCourse")
  linksToCourse: [CourseLink!]! @relation(name: "TargetCourse")
  concepts: [Concept!]! @relation(name:"Courses")
  workspaces: [Workspace!]! @relation(name:"WorkspaceCourses")
}

type ConceptLink { 
  id: ID! @id
  from: Concept! @relation(link: INLINE, name: "Prerequisite")
  to: Concept! @relation(link: INLINE, name: "LearningObjective")
  official: Boolean! @default(value: false)
  workspace: [Workspace!]! @relation(name:"WorkspaceConceptLinks")
}

type Concept {
  id: ID! @id
  name: String!
  description: String
  official: Boolean! @default(value: false)
  createdBy: User!
  linksFromConcept: [ConceptLink!]! @relation(name: "Prerequisite")
  linksToConcept: [ConceptLink!]! @relation(name: "LearningObjective")
  courses: [Course!]! @relation(name: "Courses")
  resources: [Resource!]!
  workspaces: [Workspace!]! @relation(name:"WorkspaceConcepts")
}

type Resource {
  id: ID! @id
  concept: Concept!
  name: String!
  description: String!
  urls: [URL!]!
}

type URL {
  id: ID! @id
  address: String!
  resource: Resource!
}